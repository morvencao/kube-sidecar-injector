apiVersion: admissionregistration.k8s.io/v1beta1
kind: MutatingWebhookConfiguration
metadata:
  name: sidecar-injector-webhook-cfg
  labels:
    app: sidecar-injector
webhooks:
- name: sidecar-injector.morven.me
  clientConfig:
    service:
      name: sidecar-injector-webhook-svc
      path: "/mutate"
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUM1ekNDQWMrZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRJeU1ERXhNakl6TlRFMU1Gb1hEVE15TURFeE1ESXpOVEUxTUZvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBS2N1CjllV1UzWFRQR3psQXhhZWF6N3hXUVNzeENveXZFbzBaU3k1Mk1adlpNQndTVVRUaW9ubnJCRFZyTVpaRitMS1UKQUFlQVY0M2x0dWJTT1dWY1dMUUpyakVEM1doNzJMUXYvc3ljMjNYdGtIQmlvM1EyRENjNnJnR0ZZNmtBZDVxZgpqNGlldkVrdHdSaG93aFZoYlFsYjE0MGtzQW5OQlR3eE1hZDhzeEk5WlpjUEE5UmJFQUd1ZjFLaDJXNnBJTVdlCkJ3S2kwVzFIeEI4cTg5SS9HWEkrUzlBRU5EdTN6SlRWOWlCa3QyRXEvZ3gxWGxmZThMcFQ5VU1ZS21kcy80VFQKcGd6elNEZ2p1ckJzWlJreGlaVmJQK3cxUFRGakJkUUZtU1hyNEF2Z0ZJQVBYYlpOVjVraS9GREQyWXVDd3FnTgpCVXUyWW1GUXFxaDdnYVpMSyswQ0F3RUFBYU5DTUVBd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0hRWURWUjBPQkJZRUZHbUdUNkhlZFJZV01RbEVHbXQwOHFhdjBlNXpNQTBHQ1NxR1NJYjMKRFFFQkN3VUFBNElCQVFCWXEvcE5mbUVLcU9sVEp1R0pVR2padDRPeW5CVElpaWgydkpqNFJDRXZHRGg2SDdmNgpGMVVwSWNDZ1NMSmlwR3ljUG90cnpUU3J0UUdKc3RsdVBxWTEwUXkyNHlPQlJnU3BBTEZXRmVCUmFWekJGNnNBCjZWWE1WbEZKa0pQaU9adWdIcTdvNStLU2FOVjNFcE5IZ0QyWE5iV2lLdmVhZ25Ybm5VNTV1TGdEclNtSk5iTjUKVTZQbGE1WVBZV0VVU2Q1ZXVBL3NPejNMdmZINC9vN203VDN3NG96Q1dGTXhGY0RZcVE1L2F3aWNZeW8xZ1VMZgpUMzNGdk5nbmMyVlE1cHZEdXdMbktNaW5kWU54dm05NDRMMEo4aWNtb1hBekdyVjhUblFFNFRIQXdud0R4NHIrCjg0eXVaMnhjNnFCa3pLMWpyNk9tenhmOVhBQ1JKUHFFMVJGegotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  rules:
  - operations: ["CREATE", "UPDATE"]
    apiGroups: [""]
    apiVersions: ["v1"]
    resources: ["pods"]
  namespaceSelector:
    matchLabels:
      sidecar-injection: enabled
